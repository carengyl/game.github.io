<html>
<head><title>Magic Dungeon</title>
<script type="text/javascript" src="data/data.js"></script>
<link rel="stylesheet" href="data/design.css">
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400&display=swap" rel="stylesheet">

<style>
body {
  display: -ms-flexbox;
  display: -webkit-box;
  display: flex;
  flex-direction: column;
  -ms-flex-align: center;
  -ms-flex-pack: center;
  -webkit-box-align: center;
  align-items: center;
  -webkit-box-pack: center;
  justify-content: center;
  padding-top: 40px;
  padding-bottom: 40px;
}
p, span, input, td {
 font-size:24px;
}
button{
    font-size:18px;
}
#ot {
    color:#c592d5;
}
</style>
</head>
<body>
<div class="healthbar" id='game1' style="display: none">
    <div class="hp1">
        <div class="heart"><img src="data/heart.png"  id='charhit3'></div>
        <div class="heart"><img src="data/heart.png"  id='charhit2'></div>
        <div class="heart"><img src="data/heart.png"  id='charhit1'></div>
    </div>
        
    <div class="hp2">
        <div id='enhit3' class="heart"><img src="data/heart.png"></div>
        <div id='enhit2' class="heart"><img src="data/heart.png"></div>
        <div id='enhit1' class="heart"><img src="data/heart.png"></div>
    </div>
</div>

<div style="margin-left: auto;margin-right: auto; text-align:center; width: 600px; height: 420px; background-color: #674d6f; border-radius: 10px;"> 

<p style="font-family: 'Press Start 2P', cursive; color: #c592d5; margin-top: 50px; font-size: 40px;">Magic Dungeon</p>
<p id="vibor3"; style="font-family: 'Roboto', sans-serif; color: #c592d5; font-size: 30px;">Выберите тему:</p>
<button onclick="matem()" id='vibor1' class="button" style="font-size: 35px;"> Математика: <br> Умножение</button>
<button onclick="biol()" id='vibor2' class="button" style="margin-top: 40px; margin-left: 40px; font-size: 35px;"> Биология: <br> Загадки</button>

<div id='game2' style="display: none">
<p style="font-family: 'Roboto', sans-serif; color: #c592d5;">Тест по теме: <span id="tema"></span>.</p>

<div id="vopros1" style="display:block; color: #c592d5; font-family: 'Roboto', sans-serif;">

<p style="font-family: 'Roboto', sans-serif; color:#c592d5;">Вопрос 1</p>
<p><span id="v_1"></span> <input type="text" id="z_1"></p>

</div>

<div id="vopros2" style="display:none; color: #c592d5; font-family: 'Roboto', sans-serif;">

<p style="font-family: 'Roboto', sans-serif; color: #c592d5;">Вопрос 2</p>
<p><span id="v_2"></span> <input type="text" id="z_2"></p>

</div>

<div id="vopros3" style="display:none; color: #c592d5; font-family: 'Roboto', sans-serif;">

<p style="font-family: 'Roboto', sans-serif; color: #c592d5;">Вопрос 3</p>
<p><span id="v_3"></span> <input type="text" id="z_3"></p>

</div>

<button id="kn_sl" onclick="sled_vopr();" style="color: black;" class='button'> <p style="font-family: 'Roboto', sans-serif;    color: #c592d5;">Следующий вопрос</p> </button>

<button id="kn_pr" style="display:none; color: black;" onclick="proverit();" class="button"> <p style="font-family: 'Roboto', sans-serif;  color: #c592d5;">Проверить</p> </button>

<div id="rezultat" style="font-family: 'Roboto', sans-serif; color: #c592d5;"></div>
</div>
</div>
<html>
 <head>
  <meta charset="utf-8">
  <style> 
   html { height: 100%; }
   body {
    margin: 0; /* Убираем отступы */
    height: 100%; /* Высота страницы */
    background: url(data/background.png); /* Параметры фона */
    background-size: cover; /* Фон занимает всю доступную площадь */
   } 
  </style>
 </head>
<br>
<div class="anim" id='game3' style="display: none">
    <div class="player" style="float: left;"> <img src="data/char.png" id='plr' class="train"> </div>
    <div class='enemy' ><img src="data/1.png" id='shark' class='train1'> <img src="data/3.png" id='snake' class='train1'></div>
</div>
</body>
</html>
<script>
    let hp1 = 3
    let hp2 = 3
function matem(){
    test = mtest;
    vopros_1 = mvop1;
    vopros_2 = mvop2;
    vopros_3 = mvop3;
    pr_otv_zadachi_1 = mpr_otv_zadachi_1;
    pr_otv_zadachi_2 = mpr_otv_zadachi_2;
    pr_otv_zadachi_3 = mpr_otv_zadachi_3;
    document.getElementById('vibor1').style.display = "none";
    document.getElementById('vibor2').style.display = "none";
    document.getElementById('vibor3').style.display = "none";
    document.getElementById('game1').style.display = "block";
    document.getElementById('game2').style.display = "block";
    document.getElementById('game3').style.display = "block";
    document.getElementById('shark').style.display = "none";
    document.getElementById('v_1').innerHTML = vopros_1;
    document.getElementById('v_2').innerHTML = vopros_2;
    document.getElementById('v_3').innerHTML = vopros_3;
    document.getElementById('tema').innerHTML = test;
}

function biol(){
    test = btest;
    vopros_1 = bvop1;
    vopros_2 = bvop2;
    vopros_3 = bvop3;
    pr_otv_zadachi_1 = bpr_otv_zadachi_1;
    pr_otv_zadachi_2 = bpr_otv_zadachi_2;
    pr_otv_zadachi_3 = bpr_otv_zadachi_3;
    document.getElementById('vibor1').style.display = "none";
    document.getElementById('vibor2').style.display = "none";
    document.getElementById('vibor3').style.display = "none";
    document.getElementById('game1').style.display = "block";
    document.getElementById('game2').style.display = "block";
    document.getElementById('game3').style.display = "block";
    document.getElementById('snake').style.display = "none";
    document.getElementById('v_1').innerHTML = vopros_1;
    document.getElementById('v_2').innerHTML = vopros_2;
    document.getElementById('v_3').innerHTML = vopros_3;
    document.getElementById('tema').innerHTML = test;
}

function sled_vopr(){
    if(document.getElementById('vopros2').style.display == "block"){
        document.getElementById('vopros2').style.display = "none";
        document.getElementById('vopros3').style.display = "block";
        document.getElementById('kn_sl').style.display = "none";
        document.getElementById('kn_pr').style.display = "block";
        document.getElementById('snake').style.right='50%'
        document.getElementById('shark').style.right='50%'
        document.getElementById('plr').style.left='55%'
        otv_uch_2 = document.getElementById('z_2').value;
        otv_ucgenika_2 = otv_uch_2;
        otv_uch_2 = kodirov(otv_uch_2);
        if(otv_uch_2 == pr_otv_zadachi_2){
            hp2 -= 1
            if(hp2 == 2){
                document.getElementById('enhit1').style.display = 'none';
            }
            if(hp2 == 1){
                document.getElementById('enhit2').style.display = 'none';
            }
        } else{
            hp1 -= 1
            if(hp1 == 2){
                document.getElementById('charhit1').style.display = 'none';
            }
            if(hp1 == 1){
                document.getElementById('charhit2').style.display = 'none';
            }
        }
    }
    if(document.getElementById('vopros1').style.display == "block"){
        document.getElementById('vopros1').style.display = "none";
        document.getElementById('vopros2').style.display = "block";
        document.getElementById('snake').style.right='100%'
        document.getElementById('plr').style.left='100%'
        document.getElementById('shark').style.right='100%'
        otv_uch_1 = document.getElementById('z_1').value;
        otv_ucgenika_1 = otv_uch_1;
        otv_uch_1 = kodirov(otv_uch_1);
        if(otv_uch_1 == pr_otv_zadachi_1){
        hp2 -= 1;
        document.getElementById('enhit1').style.display = 'none';
        } else{
            hp1 -= 1;
            document.getElementById('charhit1').style.display = 'none';
        }
    }
}

function proverit(){
    otv_uch_1 = document.getElementById('z_1').value;
    otv_ucgenika_1 = otv_uch_1;
    otv_uch_1 = kodirov(otv_uch_1);
    otv_uch_2 = document.getElementById('z_2').value;
    otv_ucgenika_2 = otv_uch_2;
    otv_uch_2 = kodirov(otv_uch_2);
    otv_uch_3 = document.getElementById('z_3').value;
    otv_ucgenika_3 = otv_uch_3;
    otv_uch_3 = kodirov(otv_uch_3);
    ball = 0;
    document.getElementById('vopros3').style.display = "none";
    document.getElementById('kn_pr').style.display = "none";
    if(otv_uch_1 == pr_otv_zadachi_1){
        ball +=1;
        otveti = "<span id='vo'>Вопрос 1. Вы ответили верно. Ваш ответ: "+otv_ucgenika_1+"</span>";
    } else {
        otveti = "<span id='nvo'>Вопрос 1. Вы ответили не верно. Ваш ответ: "+otv_ucgenika_1+"</span>"; 
    }
    if(otv_uch_2 == pr_otv_zadachi_2){
        ball +=1;
        otveti += "<br><span id='vo'>Вопрос 2. Вы ответили верно. Ваш ответ: "+otv_ucgenika_2+"</span>";
    } else {
        otveti += "<br><span id='nvo'>Вопрос 2. Вы ответили не верно. Ваш ответ: "+otv_ucgenika_2+"</span>"; 
    }
    if(otv_uch_3 == pr_otv_zadachi_3){
        ball +=1;
        otveti += "<br><span id='vo'>Вопрос 3. Вы ответили верно. Ваш ответ: "+otv_ucgenika_3+"</span>";
        hp2 -= 1
    } else {
        hp1 -= 1
        otveti += "<br><span id='nvo'>Вопрос 3. Вы ответили не верно. Ваш ответ: "+otv_ucgenika_3+"</span>";
    }
    if(hp2 == 2){
        document.getElementById('enhit1').style.display = 'none';
    }
    if(hp2 == 1){
        document.getElementById('enhit2').style.display = 'none';
        document.getElementById('snake').style.display = 'none';
        document.getElementById('shark').style.display = 'none';
    }
    if(hp2 == 0){
        document.getElementById('enhit3').style.display = 'none';
        document.getElementById('snake').style.display = 'none';
        document.getElementById('shark').style.display = 'none';
    }
    if(hp1 == 2){
        document.getElementById('charhit1').style.display = 'none';
    }
    if(hp1 == 1){
        document.getElementById('charhit2').style.display = 'none';
    }
    if(hp1 == 0){
        document.getElementById('plr').style.display = 'none';
        document.getElementById('charhit3').style.display = 'none';
    }
    vsego_zadach = 3;
    procent_vip = ball/vsego_zadach * 100;
    procent_vip = procent_vip.toFixed();
    document.getElementById('rezultat').innerHTML = "<span id='ot'>Задания выполнены верно на "+procent_vip+"%.</span><br><br>"+otveti;
}

function kodirov(stroka) { 
    var b64ch = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefg'+ 
                   'hijklmnopqrstuvwxyz0123456789+/='; 
    var b64enc = ''; 
    var ch1, ch2, ch3; 
    var en1, en2, en3, en4; 
    for (var i=0; i<stroka.length;) { 
        ch1 = stroka.charCodeAt(i++); 
        ch2 = stroka.charCodeAt(i++); 
        ch3 = stroka.charCodeAt(i++); 
        en1 = ch1 >> 2; 
        en2 = ((ch1 & 3) << 4) | (ch2 >> 4); 
        en3 = isNaN(ch2) ? 64:(((ch2 & 15) << 2) | (ch3 >> 6)); 
        en4 = isNaN(ch3) ? 64:(ch3 & 63); 
        b64enc += b64ch.charAt(en1) + b64ch.charAt(en2) + 
                      b64ch.charAt(en3) + b64ch.charAt(en4); 
    } 
    return b64enc; 
} 

</script>
</body>
</html>
